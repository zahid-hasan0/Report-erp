<link rel="stylesheet" href="assets/css/reports.css">

<div class="container-fluid p-0">
    <!-- Premium Module Header -->
    <!-- Simple Header -->
    <div class="px-4 pt-4 mb-3">
        <h2 class="fw-bold mb-1">Reports & Distribution</h2>
        <p class="text-muted small">Generate, distribute, and manage system report data.</p>
    </div>

    <div class="px-4 pb-5">
        <!-- Filter Bar Card -->
        <div class="card border-0 shadow-sm rounded-4 mb-4">
            <div class="card-header bg-white border-bottom-0 pt-4 px-4">
                <div class="d-flex justify-content-between align-items-center">
                    <h5 class="fw-bold mb-0">Custom Report Generator</h5>
                    <div class="d-flex gap-2">
                        <button class="btn btn-success btn-sm px-3" onclick="exportToExcel()" id="reportExportBtn"
                            disabled>
                            <i class="fas fa-file-excel me-1"></i> Excel
                        </button>
                        <button class="btn btn-info btn-sm px-3 text-white" onclick="printReport()" id="reportPrintBtn"
                            disabled>
                            <i class="fas fa-print me-1"></i> Print
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body p-4">
                <!-- Row 1: Buyer Filter (Prominent) -->
                <div class="row mb-4">
                    <div class="col-12">
                        <label class="form-label extra-small fw-bold text-muted text-uppercase mb-2">Buyer
                            Selection</label>
                        <div class="dropdown custom-search-dropdown w-100" id="reportBuyerDropdownContainer">
                            <button
                                class="btn btn-light w-100 text-start d-flex justify-content-between align-items-center border-0 py-3 px-4"
                                type="button" id="reportBuyerBtn" data-bs-toggle="dropdown"
                                style="height: 50px; font-size: 16px;">
                                <span id="reportBuyerLabel">All Buyers</span>
                                <i class="fas fa-chevron-down extra-small text-muted"></i>
                            </button>
                            <div class="dropdown-menu w-100 p-0 shadow-sm border-0" aria-labelledby="reportBuyerBtn"
                                style="z-index: 1050;">
                                <div class="p-3 border-bottom sticky-top bg-white">
                                    <input type="text" class="form-control" id="reportBuyerSearch"
                                        placeholder="Search buyer..." autocomplete="off">
                                </div>
                                <div id="reportBuyerList" style="max-height: 250px; overflow-y: auto;">
                                    <!-- Options populated via JS -->
                                </div>
                            </div>
                        </div>
                        <input type="hidden" id="reportBuyerValue" value="all">
                    </div>
                </div>

                <!-- Row 2: Date & Action Filters -->
                <div class="row g-3 align-items-end">
                    <!-- Month Filter -->
                    <div class="col-md-3">
                        <label class="form-label extra-small fw-bold text-muted text-uppercase mb-2">Month</label>
                        <select id="reportMonth" class="form-select border-0 bg-light">
                            <option value="all">All Months</option>
                            <option value="1">January</option>
                            <option value="2">February</option>
                            <option value="3">March</option>
                            <option value="4">April</option>
                            <option value="5">May</option>
                            <option value="6">June</option>
                            <option value="7">July</option>
                            <option value="8">August</option>
                            <option value="9">September</option>
                            <option value="10">October</option>
                            <option value="11">November</option>
                            <option value="12">December</option>
                        </select>
                    </div>
                    <!-- Date Range -->
                    <div class="col-md-5">
                        <label class="form-label extra-small fw-bold text-muted text-uppercase mb-2">Date Range</label>
                        <div class="input-group">
                            <input type="date" id="reportFromDate" class="form-control border-0 bg-light"
                                title="From Date">
                            <span class="input-group-text border-0 bg-light text-mutedSmall">-</span>
                            <input type="date" id="reportToDate" class="form-control border-0 bg-light" title="To Date">
                        </div>
                    </div>
                    <!-- Search Button -->
                    <div class="col-md-2">
                        <button class="btn btn-primary w-100 fw-bold" onclick="generateReport()" style="height: 38px;">
                            <i class="fas fa-sync-alt me-2"></i>Generate
                        </button>
                    </div>
                    <!-- Reset Button -->
                    <div class="col-md-2">
                        <button class="btn btn-outline-secondary w-100 fw-bold" onclick="resetReportGenerator()"
                            style="height: 38px;">
                            <i class="fas fa-undo me-2"></i>Reset
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Result Table Card -->
        <div class="card border-0 shadow-sm rounded-4 overflow-hidden mb-5">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead class="bg-light">
                            <tr>
                                <th class="ps-4">Booking No</th>
                                <th>Customer</th>
                                <th>Buyer</th>
                                <th>Item</th>
                                <th>Date</th>
                                <th>Status</th>
                                <th>Check Date</th>
                                <th class="pe-4">Remarks</th>
                            </tr>
                        </thead>
                        <tbody id="reportResultsTable">
                            <tr>
                                <td colspan="8" class="text-center py-5 text-muted">
                                    <div class="opacity-50">
                                        <i class="fas fa-filter fa-3x mb-3"></i>
                                        <p class="mb-0 fw-medium">Select filters and click "Generate" to view results
                                        </p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>